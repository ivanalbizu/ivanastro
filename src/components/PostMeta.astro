---
export interface Props {
  frontmatter: any;
  showCategories?: boolean;
  showExcerpt?: boolean;
  showReadMore?: boolean;
}

const {
  frontmatter,
  showCategories = true,
  showExcerpt = true,
  showReadMore = false,
} = Astro.props;
const base = import.meta.env.BASE_URL;
---

<div class="post-meta">
  <div class="post-meta-row">
    <time class="post-meta__date" datetime={frontmatter.date}>
      {
        new Date(frontmatter.date).toLocaleDateString("es-ES", {
          year: "numeric",
          month: "long",
          day: "numeric",
        })
      }
    </time>
    {
      frontmatter.readingTime && (
        <span class="post-meta__reading-time">{frontmatter.readingTime}</span>
      )
    }
  </div>
  {
    showCategories &&
      frontmatter.categories &&
      frontmatter.categories.length > 0 && (
        <ul class="post-meta__categories">
          {frontmatter.categories.map((category: string) => (
            <li>
              <a
                href={`${base}categorias/${category.toLowerCase().replace(/[\/\s]+/g, "-")}`}
              >
                {category}
              </a>
            </li>
          ))}
        </ul>
      )
  }
  {
    showExcerpt && frontmatter.description && (
      <p class="post-meta__excerpt">{frontmatter.description}</p>
    )
  }
  {
    showReadMore && (
      <a href={`${base}blog/${frontmatter.slug}`} class="post-meta__readmore">
        Seguir leyendo
        <span class="visually-hidden">sobre {frontmatter.title}</span>
      </a>
    )
  }
</div>

<style lang="scss">
  .post-meta {
    display: flex;
    flex-direction: column;
    gap: calc(var(--grid-unit) * 1.5);
    align-items: start;
    &-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0 calc(var(--grid-unit) * 1.5);
      justify-content: space-between;
      width: 100%;
    }
    &__date {
      font-family: var(--font-mono);
      font-size: var(--fs-paragraph-4);
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    &__reading-time {
      font-family: var(--font-mono);
      font-size: var(--fs-paragraph-4);
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    &__categories {
      display: flex;
      flex-wrap: wrap;
      gap: calc(var(--grid-unit));
      padding: 0;
      margin: 0;
    }
    &__excerpt {
      font-size: var(--fs-paragraph-1);
      color: var(--color-text-secondary);
      line-height: 1.6;
      margin-bottom: 0;
    }
    &__readmore {
      font-family: var(--font-family-primary);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      color: var(--color-interaction-default);
      text-decoration-color: transparent;
      font-size: var(--fs-paragraph-4);
      transition: color var(--transition-duration-normal) ease;
      display: inline-block;
      margin-top: var(--grid-unit);
    }
    &:hover,
    &:focus {
      color: var(--color-text-primary);
    }
  }
</style>
